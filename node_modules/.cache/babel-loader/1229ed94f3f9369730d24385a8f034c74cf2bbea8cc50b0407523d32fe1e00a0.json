{"ast":null,"code":"/**\r\n * Utility functions for schedule conflict detection and generation\r\n */// Map days to numbers for easier comparison\nconst DAY_MAP={'L':0,// Monday\n'M':1,// Tuesday\n'X':2,// Wednesday (not used in data but included)\n'J':3,// Thursday\n'V':4// Friday\n};/**\r\n * Convert time string (HH:MM) to minutes since midnight\r\n */const timeToMinutes=timeStr=>{const[hours,minutes]=timeStr.split(':').map(Number);return hours*60+minutes;};/**\r\n * Check if two time ranges overlap\r\n */const timeRangesOverlap=(start1,end1,start2,end2)=>{const start1Min=timeToMinutes(start1);const end1Min=timeToMinutes(end1);const start2Min=timeToMinutes(start2);const end2Min=timeToMinutes(end2);return start1Min<end2Min&&start2Min<end1Min;};/**\r\n * Check if two subjects have a schedule conflict\r\n */export const hasConflict=(subject1,subject2)=>{// If either subject has no schedule, no conflict\nif(!subject1.schedule||!subject2.schedule){return false;}// Check if they share any common day\nconst commonDays=subject1.days.filter(day=>subject2.days.includes(day));if(commonDays.length===0){return false;// No common days, no conflict\n}// Check time overlap for each common day\nfor(const day of commonDays){// Get the schedule for this day\nlet schedule1=subject1.schedule;let schedule2=subject2.schedule;// Handle subjects with different schedules on different days (like Admin I)\n// Check if this day is the last day and subject has schedule2\nconst dayIndex1=subject1.days.indexOf(day);const dayIndex2=subject2.days.indexOf(day);if(subject1.schedule2&&dayIndex1===subject1.days.length-1){schedule1=subject1.schedule2;}if(subject2.schedule2&&dayIndex2===subject2.days.length-1){schedule2=subject2.schedule2;}if(schedule1&&schedule2){if(timeRangesOverlap(schedule1.start,schedule1.end,schedule2.start,schedule2.end)){return true;// Conflict found\n}}}return false;};/**\r\n * Check if a set of subjects has any conflicts\r\n */export const hasAnyConflict=subjects=>{for(let i=0;i<subjects.length;i++){for(let j=i+1;j<subjects.length;j++){if(hasConflict(subjects[i],subjects[j])){return true;}}}return false;};/**\r\n * Generate all possible combinations of selected subjects without conflicts\r\n */export const generateValidSchedules=selectedSubjects=>{if(selectedSubjects.length===0){return[];}// Validate all subjects are from the same semester\nconst semesters=new Set(selectedSubjects.map(s=>\"\".concat(s.year,\"-\").concat(s.semester)));if(semesters.size>1){return[];// Different semesters selected\n}// Generate all combinations (power set)\nconst combinations=[];const n=selectedSubjects.length;// Generate from 1 to n subjects (at least one subject)\nfor(let mask=1;mask<1<<n;mask++){const combination=[];for(let i=0;i<n;i++){if(mask&1<<i){combination.push(selectedSubjects[i]);}}// Check if this combination has no conflicts\nif(!hasAnyConflict(combination)){combinations.push(combination);}}// Sort by number of subjects (descending) to show most complete schedules first\ncombinations.sort((a,b)=>b.length-a.length);return combinations;};/**\r\n * Get a color for a subject (for visualization)\r\n */const colors=['#4A90E2','#50C878','#FF6B6B','#FFA500','#9B59B6','#1ABC9C','#E74C3C','#3498DB','#F39C12','#E91E63','#00BCD4','#8BC34A','#FF5722','#673AB7','#009688'];let colorIndex=0;const subjectColors=new Map();export const getSubjectColor=subjectId=>{if(!subjectColors.has(subjectId)){subjectColors.set(subjectId,colors[colorIndex%colors.length]);colorIndex++;}return subjectColors.get(subjectId);};/**\r\n * Reset color mapping (useful when starting a new selection)\r\n */export const resetColors=()=>{subjectColors.clear();colorIndex=0;};","map":{"version":3,"names":["DAY_MAP","timeToMinutes","timeStr","hours","minutes","split","map","Number","timeRangesOverlap","start1","end1","start2","end2","start1Min","end1Min","start2Min","end2Min","hasConflict","subject1","subject2","schedule","commonDays","days","filter","day","includes","length","schedule1","schedule2","dayIndex1","indexOf","dayIndex2","start","end","hasAnyConflict","subjects","i","j","generateValidSchedules","selectedSubjects","semesters","Set","s","concat","year","semester","size","combinations","n","mask","combination","push","sort","a","b","colors","colorIndex","subjectColors","Map","getSubjectColor","subjectId","has","set","get","resetColors","clear"],"sources":["C:/Users/Jaben/Documents/GitHub/TiempoTruco/src/utils/scheduleUtils.js"],"sourcesContent":["/**\r\n * Utility functions for schedule conflict detection and generation\r\n */\r\n\r\n// Map days to numbers for easier comparison\r\nconst DAY_MAP = {\r\n  'L': 0, // Monday\r\n  'M': 1, // Tuesday\r\n  'X': 2, // Wednesday (not used in data but included)\r\n  'J': 3, // Thursday\r\n  'V': 4  // Friday\r\n};\r\n\r\n/**\r\n * Convert time string (HH:MM) to minutes since midnight\r\n */\r\nconst timeToMinutes = (timeStr) => {\r\n  const [hours, minutes] = timeStr.split(':').map(Number);\r\n  return hours * 60 + minutes;\r\n};\r\n\r\n/**\r\n * Check if two time ranges overlap\r\n */\r\nconst timeRangesOverlap = (start1, end1, start2, end2) => {\r\n  const start1Min = timeToMinutes(start1);\r\n  const end1Min = timeToMinutes(end1);\r\n  const start2Min = timeToMinutes(start2);\r\n  const end2Min = timeToMinutes(end2);\r\n  \r\n  return start1Min < end2Min && start2Min < end1Min;\r\n};\r\n\r\n/**\r\n * Check if two subjects have a schedule conflict\r\n */\r\nexport const hasConflict = (subject1, subject2) => {\r\n  // If either subject has no schedule, no conflict\r\n  if (!subject1.schedule || !subject2.schedule) {\r\n    return false;\r\n  }\r\n\r\n  // Check if they share any common day\r\n  const commonDays = subject1.days.filter(day => subject2.days.includes(day));\r\n  \r\n  if (commonDays.length === 0) {\r\n    return false; // No common days, no conflict\r\n  }\r\n\r\n  // Check time overlap for each common day\r\n  for (const day of commonDays) {\r\n    // Get the schedule for this day\r\n    let schedule1 = subject1.schedule;\r\n    let schedule2 = subject2.schedule;\r\n    \r\n    // Handle subjects with different schedules on different days (like Admin I)\r\n    // Check if this day is the last day and subject has schedule2\r\n    const dayIndex1 = subject1.days.indexOf(day);\r\n    const dayIndex2 = subject2.days.indexOf(day);\r\n    \r\n    if (subject1.schedule2 && dayIndex1 === subject1.days.length - 1) {\r\n      schedule1 = subject1.schedule2;\r\n    }\r\n    if (subject2.schedule2 && dayIndex2 === subject2.days.length - 1) {\r\n      schedule2 = subject2.schedule2;\r\n    }\r\n\r\n    if (schedule1 && schedule2) {\r\n      if (timeRangesOverlap(\r\n        schedule1.start,\r\n        schedule1.end,\r\n        schedule2.start,\r\n        schedule2.end\r\n      )) {\r\n        return true; // Conflict found\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n/**\r\n * Check if a set of subjects has any conflicts\r\n */\r\nexport const hasAnyConflict = (subjects) => {\r\n  for (let i = 0; i < subjects.length; i++) {\r\n    for (let j = i + 1; j < subjects.length; j++) {\r\n      if (hasConflict(subjects[i], subjects[j])) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\n/**\r\n * Generate all possible combinations of selected subjects without conflicts\r\n */\r\nexport const generateValidSchedules = (selectedSubjects) => {\r\n  if (selectedSubjects.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  // Validate all subjects are from the same semester\r\n  const semesters = new Set(selectedSubjects.map(s => `${s.year}-${s.semester}`));\r\n  if (semesters.size > 1) {\r\n    return []; // Different semesters selected\r\n  }\r\n\r\n  // Generate all combinations (power set)\r\n  const combinations = [];\r\n  const n = selectedSubjects.length;\r\n  \r\n  // Generate from 1 to n subjects (at least one subject)\r\n  for (let mask = 1; mask < (1 << n); mask++) {\r\n    const combination = [];\r\n    for (let i = 0; i < n; i++) {\r\n      if (mask & (1 << i)) {\r\n        combination.push(selectedSubjects[i]);\r\n      }\r\n    }\r\n    \r\n    // Check if this combination has no conflicts\r\n    if (!hasAnyConflict(combination)) {\r\n      combinations.push(combination);\r\n    }\r\n  }\r\n\r\n  // Sort by number of subjects (descending) to show most complete schedules first\r\n  combinations.sort((a, b) => b.length - a.length);\r\n\r\n  return combinations;\r\n};\r\n\r\n/**\r\n * Get a color for a subject (for visualization)\r\n */\r\nconst colors = [\r\n  '#4A90E2', '#50C878', '#FF6B6B', '#FFA500', '#9B59B6',\r\n  '#1ABC9C', '#E74C3C', '#3498DB', '#F39C12', '#E91E63',\r\n  '#00BCD4', '#8BC34A', '#FF5722', '#673AB7', '#009688'\r\n];\r\n\r\nlet colorIndex = 0;\r\nconst subjectColors = new Map();\r\n\r\nexport const getSubjectColor = (subjectId) => {\r\n  if (!subjectColors.has(subjectId)) {\r\n    subjectColors.set(subjectId, colors[colorIndex % colors.length]);\r\n    colorIndex++;\r\n  }\r\n  return subjectColors.get(subjectId);\r\n};\r\n\r\n/**\r\n * Reset color mapping (useful when starting a new selection)\r\n */\r\nexport const resetColors = () => {\r\n  subjectColors.clear();\r\n  colorIndex = 0;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}