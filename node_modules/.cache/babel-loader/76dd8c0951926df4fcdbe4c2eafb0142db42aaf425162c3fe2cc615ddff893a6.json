{"ast":null,"code":"import React,{useState}from'react';import{getSubjectColor,resetColors}from'../utils/scheduleUtils';import'./ScheduleTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ScheduleTable=_ref=>{let{schedules}=_ref;const[currentScheduleIndex,setCurrentScheduleIndex]=useState(0);if(!schedules||schedules.length===0){return null;}// Reset colors when schedules change\nReact.useEffect(()=>{resetColors();},[schedules]);const currentSchedule=schedules[currentScheduleIndex];const days=['L','M','J','V'];const dayNames={'L':'Lunes','M':'Martes','J':'Jueves','V':'Viernes'};const timeSlots=[{start:'18:00',end:'19:45',label:'18:00 - 19:45'},{start:'20:00',end:'21:45',label:'20:00 - 21:45'}];// Build schedule grid\nconst scheduleGrid={};days.forEach(day=>{scheduleGrid[day]={};timeSlots.forEach(slot=>{scheduleGrid[day][slot.start]=null;});});// Fill in subjects\ncurrentSchedule.forEach(subject=>{if(!subject.schedule)return;subject.days.forEach(day=>{if(scheduleGrid[day]){// Handle subjects with schedule2 (different schedule on last day)\nlet schedule=subject.schedule;if(subject.schedule2&&subject.days.indexOf(day)===subject.days.length-1){schedule=subject.schedule2;}if(schedule&&scheduleGrid[day][schedule.start]===null){scheduleGrid[day][schedule.start]=subject;}}});});return/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-table-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Horarios Generados\"}),schedules.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-navigation\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentScheduleIndex(Math.max(0,currentScheduleIndex-1)),disabled:currentScheduleIndex===0,className:\"nav-btn\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-left\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"schedule-counter\",children:[currentScheduleIndex+1,\" / \",schedules.length]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentScheduleIndex(Math.min(schedules.length-1,currentScheduleIndex+1)),disabled:currentScheduleIndex===schedules.length-1,className:\"nav-btn\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"schedule-info\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:currentSchedule.length}),\" asignatura\",currentSchedule.length!==1?'s':'',\" seleccionada\",currentSchedule.length!==1?'s':'']})}),/*#__PURE__*/_jsx(\"div\",{className:\"schedule-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"schedule-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"time-column\",children:\"Horario\"}),days.map(day=>/*#__PURE__*/_jsx(\"th\",{children:dayNames[day]},day))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:timeSlots.map(slot=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"time-cell\",children:slot.label}),days.map(day=>{const subject=scheduleGrid[day][slot.start];return/*#__PURE__*/_jsx(\"td\",{className:\"schedule-cell\",children:subject?/*#__PURE__*/_jsxs(\"div\",{className:\"subject-block\",style:{backgroundColor:getSubjectColor(subject.id)},children:[/*#__PURE__*/_jsx(\"div\",{className:\"subject-name\",children:subject.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject-year\",children:[subject.year,\"\\xB0 A\\xF1o\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-cell\",children:\"-\"})},day);})]},slot.start))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-legend\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Asignaturas en este horario:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"legend-items\",children:currentSchedule.map(subject=>/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color\",style:{backgroundColor:getSubjectColor(subject.id)}}),/*#__PURE__*/_jsxs(\"span\",{children:[subject.name,\" (\",subject.year,\"\\xB0 A\\xF1o)\"]})]},subject.id))})]})]});};export default ScheduleTable;","map":{"version":3,"names":["React","useState","getSubjectColor","resetColors","jsx","_jsx","jsxs","_jsxs","ScheduleTable","_ref","schedules","currentScheduleIndex","setCurrentScheduleIndex","length","useEffect","currentSchedule","days","dayNames","timeSlots","start","end","label","scheduleGrid","forEach","day","slot","subject","schedule","schedule2","indexOf","className","children","onClick","Math","max","disabled","min","map","style","backgroundColor","id","name","year"],"sources":["C:/Users/Jaben/Documents/GitHub/TiempoTruco/src/components/ScheduleTable.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { getSubjectColor, resetColors } from '../utils/scheduleUtils';\r\nimport './ScheduleTable.css';\r\n\r\nconst ScheduleTable = ({ schedules }) => {\r\n  const [currentScheduleIndex, setCurrentScheduleIndex] = useState(0);\r\n\r\n  if (!schedules || schedules.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // Reset colors when schedules change\r\n  React.useEffect(() => {\r\n    resetColors();\r\n  }, [schedules]);\r\n\r\n  const currentSchedule = schedules[currentScheduleIndex];\r\n  const days = ['L', 'M', 'J', 'V'];\r\n  const dayNames = { 'L': 'Lunes', 'M': 'Martes', 'J': 'Jueves', 'V': 'Viernes' };\r\n  const timeSlots = [\r\n    { start: '18:00', end: '19:45', label: '18:00 - 19:45' },\r\n    { start: '20:00', end: '21:45', label: '20:00 - 21:45' }\r\n  ];\r\n\r\n  // Build schedule grid\r\n  const scheduleGrid = {};\r\n  days.forEach(day => {\r\n    scheduleGrid[day] = {};\r\n    timeSlots.forEach(slot => {\r\n      scheduleGrid[day][slot.start] = null;\r\n    });\r\n  });\r\n\r\n  // Fill in subjects\r\n  currentSchedule.forEach(subject => {\r\n    if (!subject.schedule) return;\r\n    \r\n    subject.days.forEach(day => {\r\n      if (scheduleGrid[day]) {\r\n        // Handle subjects with schedule2 (different schedule on last day)\r\n        let schedule = subject.schedule;\r\n        if (subject.schedule2 && subject.days.indexOf(day) === subject.days.length - 1) {\r\n          schedule = subject.schedule2;\r\n        }\r\n        \r\n        if (schedule && scheduleGrid[day][schedule.start] === null) {\r\n          scheduleGrid[day][schedule.start] = subject;\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div className=\"schedule-table-container\">\r\n      <div className=\"schedule-header\">\r\n        <h2>Horarios Generados</h2>\r\n        {schedules.length > 1 && (\r\n          <div className=\"schedule-navigation\">\r\n            <button\r\n              onClick={() => setCurrentScheduleIndex(Math.max(0, currentScheduleIndex - 1))}\r\n              disabled={currentScheduleIndex === 0}\r\n              className=\"nav-btn\"\r\n            >\r\n              <i className=\"bi bi-chevron-left\"></i>\r\n            </button>\r\n            <span className=\"schedule-counter\">\r\n              {currentScheduleIndex + 1} / {schedules.length}\r\n            </span>\r\n            <button\r\n              onClick={() => setCurrentScheduleIndex(Math.min(schedules.length - 1, currentScheduleIndex + 1))}\r\n              disabled={currentScheduleIndex === schedules.length - 1}\r\n              className=\"nav-btn\"\r\n            >\r\n              <i className=\"bi bi-chevron-right\"></i>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"schedule-info\">\r\n        <p>\r\n          <strong>{currentSchedule.length}</strong> asignatura{currentSchedule.length !== 1 ? 's' : ''} seleccionada{currentSchedule.length !== 1 ? 's' : ''}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"schedule-table-wrapper\">\r\n        <table className=\"schedule-table\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"time-column\">Horario</th>\r\n              {days.map(day => (\r\n                <th key={day}>{dayNames[day]}</th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {timeSlots.map(slot => (\r\n              <tr key={slot.start}>\r\n                <td className=\"time-cell\">{slot.label}</td>\r\n                {days.map(day => {\r\n                  const subject = scheduleGrid[day][slot.start];\r\n                  return (\r\n                    <td key={day} className=\"schedule-cell\">\r\n                      {subject ? (\r\n                        <div\r\n                          className=\"subject-block\"\r\n                          style={{ backgroundColor: getSubjectColor(subject.id) }}\r\n                        >\r\n                          <div className=\"subject-name\">{subject.name}</div>\r\n                          <div className=\"subject-year\">{subject.year}° Año</div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"empty-cell\">-</div>\r\n                      )}\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"schedule-legend\">\r\n        <h3>Asignaturas en este horario:</h3>\r\n        <div className=\"legend-items\">\r\n          {currentSchedule.map(subject => (\r\n            <div key={subject.id} className=\"legend-item\">\r\n              <div\r\n                className=\"legend-color\"\r\n                style={{ backgroundColor: getSubjectColor(subject.id) }}\r\n              ></div>\r\n              <span>{subject.name} ({subject.year}° Año)</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScheduleTable;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}